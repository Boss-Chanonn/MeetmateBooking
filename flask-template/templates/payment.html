{% extends "base.html" %}

{% block title %}Payment{% endblock %}

{% block content %}
<div class="payment-page">
    <h1>Complete Your Booking</h1>
    
    <div class="payment-card">
        <div class="payment-summary">
            <h2>Booking Summary</h2>
            <div class="summary-details">
                <div class="detail-item">
                    <span class="label">Room:</span>
                    <span class="value">{{ room.name }}</span>
                </div>
                
                <div class="detail-item">
                    <span class="label">Location:</span>
                    <span class="value">{{ room.location }}</span>
                </div>
                
                <div class="detail-item">
                    <span class="label">Date:</span>
                    <span class="value">{{ booking_date }}</span>
                </div>
                
                <div class="detail-item">
                    <span class="label">Time:</span>
                    <span class="value">{{ time_start }} - {{ time_end }}</span>
                </div>
                
                <div class="detail-item">
                    <span class="label">Duration:</span>
                    <span class="value">{{ duration }} hour(s)</span>
                </div>
            </div>
        </div>
        
        <form method="POST" action="{{ url_for('process_payment') }}" class="form">
            <h2>Payment Details</h2>
            
            <div class="form-group">
                <label for="card_holder">Cardholder Name</label>
                <input type="text" id="card_holder" name="card_holder" required>
            </div>
            
            <div class="form-group">
                <label for="card_number">Card Number</label>
                <input type="text" id="card_number" name="card_number" pattern="[0-9]{16}" maxlength="16" placeholder="16-digit card number" required>
            </div>
            
            <div class="form-group">
                <label for="expiry_date">Expiry Date</label>
                <input type="text" id="expiry_date" name="expiry_date" pattern="[0-9]{2}/[0-9]{2}" placeholder="MM/YY" required>
            </div>
            
            <div class="form-group">
                <label for="cvv">CVV</label>
                <input type="text" id="cvv" name="cvv" pattern="[0-9]{3,4}" maxlength="4" placeholder="3-4 digits" required>
            </div>
            
            <div class="form-group">
                <button type="submit" class="btn btn-primary">Pay and Complete Booking</button>
                <a href="{{ url_for('booking') }}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
    
    <div class="payment-info">
        <p>All payment information is secure and encrypted.</p>
        <p>This is a demo application. No actual payment will be processed.</p>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Simple card number formatting
        var cardInput = document.getElementById('card_number');
        cardInput.onkeyup = function() {
            this.value = this.value.replace(/[^\d]/g, '');
        };
        
        // Simple expiry date formatting
        var expiryInput = document.getElementById('expiry_date');
        expiryInput.onkeyup = function() {
            var v = this.value.replace(/[^\d]/g, '');
            if (v.length > 2) {
                this.value = v.substring(0, 2) + '/' + v.substring(2, 4);
            } else {
                this.value = v;
            }
        };
        
        // Simple CVV validation
        var cvvInput = document.getElementById('cvv');
        cvvInput.onkeyup = function() {
            this.value = this.value.replace(/[^\d]/g, '');
        };
    });
</script>
{% endblock %}
